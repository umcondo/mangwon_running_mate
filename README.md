# 망원 런닝 메이트

### [Live Demo](https://mangwonrunningmate.netlify.app/)
<img src="./image/desktop_demo.gif">

### mobile Demo
<p align="center">
  <img src="./image/mobile_demo.gif">
</p>

---

개발기간 : 2022.04.11 ~ 2022.05.25
개발인원 : 1인
- 기획/디자인 : umcondo
- 개발 : umcondo

---

## 프로젝트 소개
마포와 관련된 싱글페이지 웹사이트 만드는 과업을 진행하게 되었다. 평소 망원 근처에서 런닝을 하는데 html, css, vanilla js를 이용해 러닝코스를 추천하는 사이트를 만들어 보았다. [Live Demo](https://mangwonrunningmate.netlify.app/)에서 전체적인 작동을 확인할 수 있다. 리액트 변환은 [리액트](https://github.com/umcondo/react_mangwon_running_mate)에서 진행중이다.

---

## 개발환경 및 사용툴

- HTML, CSS, Vanilla JS
- Visual Studio code
- Git, Github
- Netlify
- Kakao map API, Kakao SDK

---

## 진행과정 
- 1차(~2022/4/24) 기획, 와이어프레임, 기초적인 웹사이트 구현
- 2차(~2022/5/11) 스토리보드, 웹사이트 구현, 반응형 웹 구현, js로직 함수화, css클래스, 주석등 전체적 리팩토링, 웹사이트 최적화
- 3차(~2022/5/22) 레이아웃 수정, 각종 버그, 오류 수정, 리액트 변환(최적화 x)
- 발표(2022/5/25) 발표자료 준비 및 프로젝트 진행과정 정리

[https://umcondo.github.io/](https://umcondo.github.io/) 개인블로그에 정리해 놓았습니다.

<br>

## 알게된 점
- source code style
  - 주석
    - 함수, 페이지별 설명, 한줄 주석, 여러줄 주석의 분리
  - css
    - class naming, file 배치
  - js
    - 변수 naming, 통일성
    - 가독성
      <br><br>

- git
  - git은 버전관리 프로그램이므로 한 커밋당 하나의 기능 구현을 해야함
  - 이전 커밋 합치기
    - rebase -i, squash
  - 커밋 되돌리기
    - 이전 커밋들 지워짐 reset --soft, --mixed, --hard
    - 이전 커밋들 놔두고 새로 커밋 생성 revert
  - 뭔가 빠뜨리고 커밋했을때
    - --amend
  - 커밋을 덮어쓰고 싶을때
    - push -f
      <br><br>

- css
  - 반응형
    - media 쿼리, flex
  - 브라우저마다 다른 렌더링 방식에 대한 경험
    - 폰트마다 다른 렌더링
  - 애니메이션
    - keyframe을 이용해 각 부분별 크기, 위치 조정
      <br><br>

- js
  - 로직 함수화
  - DOM API
    - DOM 조작
      - appendChild(노드객체) -> append(노드객체 or 텍스트), prepend
      - innerText(css에 종속적이므로 느림) -> textContent
      - innerHTML로 노드들을 일일이 추가하면 그때마다 렌더링을 다시해야한다. createElement로 요소들을 넣어 노드를 새로 만들어 추가하는 것은 렌더링을 한번만 하면 되므로 더 좋다.
  - event
    - event
      - 브라우저 화면내에서 일어나는 사건
    - eventhandler
      - event 발생 시 실행되는 코드
    - eventbubbling
      - event 발생 시 브라우저가 해당요소뿐만 아니라 부모요소를 거쳐 최상위 요소까지 eventhandler가 있는지 확인하는 것
    - eventbubbling을 중단하는 법
      - e.stopPropagation()를 부모요소에 추가한다.
  - 배열, 객체
    - json형태로의 데이터 객체 화
      <br><br>

- react
  - 컴포넌트 단위로 UI제작 편함(재사용성, 수정편함)
  - 가상돔 사용으로 브라우저 리소스를 덜 사용 -> 렌더링 최적화
  - JSX를 사용해서 dom조작, html, js를 같이 쓰기 더 편함
  - SPA에 적합하고 CSR을 사용한다. 서버 부하를 줄이고 서버와의 할일을 분리하여 더 효율적인 앱관리 가능
    <br><br>
- 브라우저
  - 렌더링 과정
    - html 로드 -> html파싱, css 로드, css 파싱 -> dom 트리, cssom 트리 형성 -> 렌더 트리형성 -> 렌더링
  - 최적화
    - dom 조작 적절하게, 파일용량줄이기, 파일 link 순서 적절하게, 파싱과정을 최적화하기위해 html, css, js파일의 분리 - inline 형식 최대한 배제
  - 호환성
    - 사파리, 크롬, 파이어폭스, 오페라, 모바일 버전, IE는 제외
  
<br>

## 버그, 오류 기록

### 1) 해결된 것

#### ** 의도하지 않았으나 생긴 것 **

- 사파리, settimeout, display:block 애니메이션 오류 (setTimeout이 제대로 작동하지 않아 화면이 남아있음
  - 화면이 로딩되는 동안 애니메이션을 보여주려고 로직을 짰는데, 이 버그때문에 애니메이션 페이지 보여주고 2초 후 결과페이지를 display:block 하는 방식으로 변경
- 반응형 크기 줄이면 맨 위의 요소들이 잘리는 현상 - flex, justify-content: center로 인한 오류

  - justify-content를 기본(flex-start)으로 주고, 하위 요소(item)들에 flex-grow를 준 뒤 padding을 줘서 레이아웃은 똑같이 하되 창을 줄였을 때 위의 내용이 잘리지 않고 스크롤이 생기게 함.

- 웹폰트, 이미지가 늦게 로딩되는 현상

  - preload를 사용

- css 파일 가독성을 위해 분리 → 로딩 느려짐 -> css 파일 합치기(import 방식) -> 병렬적 css다운로드 불가능

  - 병렬적인 css 다운로드를 위해 html link 태그 방식 사용 ( 렌더링 최적화)

- 전체 화면의 height를 100vh로 했을때 핸드폰 아래 기본 푸터를 인식하지 못해 여백이 생김
  - height를 100%로 바꿔서 해결
- 높이가 작은 핸드폰에 결과페이지가 잘리는 오류(기본적인 핸드폰 주소창 등으로 인해 결과내용이 가려져서 안보임)
  - 미디어쿼리로 특정 height에서 height를 130%로 만들어 해결
- 마포sns로고 사이의 공백 -> 인라인 요소 사이 공백 → 태그 사이 줄바꿈으로 인한 공백을 브라우저가 읽어버려서 나타나는 현상

  - flex, gap으로 해결,

- css hover가 핸드폰에서 지원되지 않아 핸드폰에서 두번 클릭되는 등의 오류 발생

  - media쿼리의 hover,pointer를 활용하여 핸드폰에서는 hover를 실행되지 않도록 함
  
<br>

#### ** 의도했으나 의도대로 되지 않은 것 **

- html 페이지 하나로 개발하여 공유하기로 결과페이지 url를 복사하여 붙여넣기를 하면 결과페이지가 보여지는 것이 아니라 시작페이지부터 보인다.

  - 리액트에서 useNavigate를 통해 페이지를 나누었다. 결과페이지 url을 domain/result로 하여 해결하였다.

- 옛날 커밋 정리하려고 rebase쓰다가 최근 커밋으로 추가만 되고 커밋들이 정리되지 않았다.

  - reset --hard로 새로 만들어진 커밋 싹 날리고 기존 커밋까지로 push -f하였다. rebase -i squash로 옛날 커밋
    여러개를 하나로 합치고 다시 push -f하였다.
  - 이 과정속에서 커밋들이 머지되고 conflict하면서 엉망이 되었다.
  - 커밋을 신중하게 해야하고 예전 커밋들을 고치는 것은 rebase를 통해해야하며 rebase는 커밋로그를 새로 만드므로 협업과정에서는 지양해야한다는 점을 알게 되었다. - 개인작업에서는 커밋을 깔끔하게 하기 위해 reset을 쓸수 있지만 협업에서는 안전하게 revert를 쓰는게 나아보인다. 이런일이 협업에서 일어나지 않아 다행이었다.
  
<br>

## 2) 해결 X -> 아쉬운 점

- 브라우저 호환성
  - 파이어폭스 폰트 깨짐
- 폰트 자체적인 크기로 위아래 여백이 있어 버튼에 글자 입력시 버튼 위아래 여백간격이 균일하지 못한 오류
  - 위 아래 패딩을 다르게 함
    - 크롬 데스크톱 브라우저에선 정상적으로 보이지만 다른 브라우저나 핸드폰에서 여백이 다르다.
      - 아직 해결못함
- 공유하기, 링크복사 로직에 대한 정확한 이해 부족(소스 코드 복붙…)
  - execCommand API, kakao 공유하기 SDK
- 카카오맵으로 현재 위치 받아오는 기능이 실시간으로는 지원되지 않음
  - 웹의 한계인지 추가적인 학습필요, 리액트를 이용한 네이버지도 및 어플에선 실시간 위치가 구현되어 있다..
- png → webp로 변환 파일용량 감소
  - 사파리와 호환성 문제로 png로 다시 돌아옴
- 리액트 최적화

- 카카오맵에서 맵 확대 후 거점 숨기기를 하면 맵을 축소 했을때 다른 거점들이 숨겨지지 않음 


## 느낀점
<p>
&nbsp;2차때 보완할 점, 리액트로의 전환 등 생각했던 것들을 모두 완성할 수 없었던 것이 아쉽다. <br>
  온전히 과업에 집중하지 못했던 것은 둘째치고, 우선순위를 정하지 못하고 세부 계획을 세우지 못했다. <br>
  또한 생각보다 구현이 어려웠거나 생각하지 못한 오류들로 인해 시간이 더 걸렸던 점도 있다.<br>
  제대로 알지못하고 구현만을 위해 쓰인 코드들도 있어 마음에 남는다.<br>
  css, js 문법과 원리, 브라우저 동작원리에 대해 더 공부해야한다는 것을 느꼈다.
</p>
<p>
&nbsp;리액트로의 변환은 어떻게 했으나 어떤 점에서 최적화가 되었고, 얼마나 성능이 좋아졌는지, 어떻게 최적화해나가야할지 스스로에 대한 질문에 답할 수 없었다. 차근차근 앞으로 리액트
문서를 보면서 해결해 나가야겠다.
</p>
<p>
&nbsp;과업은 끝이 났지만 앞으로 공부하면서 보완하고 싶다. 내용적으로는 카카오맵에서 거점 클릭시 카카오지도로 이동되는 것과 결과코스와 관련된 사진들을 추가하고 싶다. 기술적으로는 카카오맵에서 실시간 현위치를 계속 갱신할 수 있도록 하고, 카카오톡 공유하기 로직에 있어 좀 더 알아보고 싶다.
</p>
<p>
&nbsp;실제로 내가 이 앱을 쓴다면 근처 샤워장, 화장실, 식수대, 편의점 등의 편의시설에 대한 정보를 카카오맵에 표시해주는 것도 생각해볼만 하다. 하지만 그런 정보는 API로 따로 제공되지 않으므로 실제 장소, 좌표를 찾는 등의 노가다를 해야한다.... 그래도 편의시설에 대한 정보가 앱에 있다면 더욱 좋은 정보를 제공해 줄 수 있으리라 생각한다.
</p>
<p>
&nbsp;러닝을 하면서 데스크탑에서는 거의 이 앱을 보지 않을 것으로 예상된다. 웹 앱으로써 모바일 UX, UI에 대해 더 고민하고 팀원들에게 피드백을 받아야겠다. 잘 만들어 진다면 추후에 플러터등을 통해 어플로 배포도 생각해 볼만 하다.
</p>
<p>
&nbsp;아쉬운점이 많지만 점진적인 목표를 통해 조금씩 조금씩 스스로 생각하는 것을 구현해나가면서 보완해나가는 것이 재밌었다. 내가 이 앱을 쓴다고 생각하고 접근하니 최적화에 대한 생각들도 자연스럽게 할 수 있었다. 오류들을 해결하기 위해 미디어쿼리, dom조작, 브라우저 렌더링 방식등 더 깊숙하게 알아보면서 이론을 실제 기술로 적용해 나가는 것이 재밌었다. 지속적으로 이 프로젝트를 보완해 나가고 싶다.
</p>

 

